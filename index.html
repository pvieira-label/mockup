<!DOCTYPE html>
<html>
<head>
	<title>Delta Q Testes</title>

	<style>
		img {
			position: absolute;
			top: 100px;
			left: 50px;
			z-index: 100;
		}

		video {
			z-index: 1;
		}
	</style>
</head>
<body>
	<img src="arrow.png">
	<video autoplay></video>
	<script>

			var errorCallback = function(e) {
				alert("Fui rejeitado. :'(");				
			};

			MediaStreamTrack.getSources(function(sourceInfos) {
			  var audioSource = null;
			  var videoSource = null;

			  for (var i = 0; i != sourceInfos.length; ++i) {
			    var sourceInfo = sourceInfos[i];
			    if (sourceInfo.kind === 'audio') {
			      console.log(sourceInfo.id, sourceInfo.label || 'microphone');

			      audioSource = sourceInfo.id;
			    } else if (sourceInfo.kind === 'video') {
			      console.log(sourceInfo.id, sourceInfo.label || 'camera');

			      videoSource = sourceInfo.id;
			    } else {
			      console.log('Some other kind of source: ', sourceInfo);
			    }
			  }

			  sourceSelected(audioSource, videoSource);
			});


			navigator.getUserMedia  = navigator.getUserMedia ||
                          navigator.webkitGetUserMedia ||
                          navigator.mozGetUserMedia ||
                          navigator.msGetUserMedia;


            alert(videoSource);

			var video = document.querySelector('video'),
			/*
				hdConstraints = {
					video: true
				}
			*/
				hdConstraints = {
					video: {
						mandatory: {
							minWidth: 1280,
							minHeight: 720
						}/*,
						optional: {
							{
								sourceId: videoSource
							}
						}
						*/
					}
				};
			
			if (navigator.getUserMedia) {
				navigator.getUserMedia(
					hdConstraints, 
					function(stream) {
			    		video.src = window.URL.createObjectURL(stream);
			  		}, 
			  		errorCallback
			  	);
			} else {
				alert("browser não suporta API")
				//video.src = 'somevideo.webm'; // fallback.
			}
			

			/*
			// Not showing vendor prefixes.
			navigator.getUserMedia({video: true, audio: true}, function(localMediaStream) {
				var video = document.querySelector('video');
				video.src = window.URL.createObjectURL(localMediaStream);

				// Note: onloadedmetadata doesn't fire in Chrome when using it with getUserMedia.
				// See crbug.com/110938.
				video.onloadedmetadata = function(e) {
				  // Ready to go. Do some stuff.
				};
			}, errorCallback);
			*/
	</script>
</body>
</html>