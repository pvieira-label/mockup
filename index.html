<!DOCTYPE html>
<html>
<head>
	<title>Delta Q Testes</title>

	<style>
		img {
			position: absolute;
			top: 100px;
			left: 50px;
			z-index: 100;
		}

		video {
			z-index: 1;
		}
	</style>
</head>
<body>
	<img src="arrow.png">
	<video autoplay></video>
	<script>

			var errorCallback = function(e) {
				alert("Fui rejeitado. :'(");				
			};			

			navigator.getUserMedia  = navigator.getUserMedia ||
                          navigator.webkitGetUserMedia ||
                          navigator.mozGetUserMedia ||
                          navigator.msGetUserMedia;

/*
            var videoSource;

            function gotSources(sourceInfos) {				
				for (var i = 0; i !== sourceInfos.length; ++i) {
					var sourceInfo = sourceInfos[i];
					if (sourceInfo.kind === 'video') {
						videoSource = sourceInfo.label;
					}
				}
			}

			if (typeof MediaStreamTrack === 'undefined' ||
				typeof MediaStreamTrack.getSources === 'undefined') {
				alert('This browser does not support MediaStreamTrack.\n\nTry Chrome.');
			} else {
				MediaStreamTrack.getSources(gotSources);
			}
*/
			var video = document.querySelector('video'),
			/*
				hdConstraints = {
					video: true
				}
			*/
				hdConstraints = {
					video: {
						mandatory: {
							minWidth: 1280,
							minHeight: 720
						},
						optional: [{
					    	sourceId: 'camera 2'
					    }]
					}
				};
			
			if (navigator.getUserMedia) {
				navigator.getUserMedia(
					hdConstraints, 
					function(stream) {
			    		video.src = window.URL.createObjectURL(stream);
			  		}, 
			  		errorCallback
			  	);
			} else {
				alert("browser não suporta API")
				//video.src = 'somevideo.webm'; // fallback.
			}
			

			/*
			// Not showing vendor prefixes.
			navigator.getUserMedia({video: true, audio: true}, function(localMediaStream) {
				var video = document.querySelector('video');
				video.src = window.URL.createObjectURL(localMediaStream);

				// Note: onloadedmetadata doesn't fire in Chrome when using it with getUserMedia.
				// See crbug.com/110938.
				video.onloadedmetadata = function(e) {
				  // Ready to go. Do some stuff.
				};
			}, errorCallback);
			*/
	</script>
</body>
</html>